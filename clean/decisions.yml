# Codebase Clean Decisions Log

## Pilot Phase Decisions - 2025-01-27

### Approved Deletions
- timestamp: "2025-01-27T10:30:00Z"
- approver: "Mendel"
- action: "DELETE"
- files:
  - frontend/knip-report.json
  - frontend/middleware.ts.disabled
  - frontend/tsprune.txt
  - frontend/depcheck.json
  - frontend/bundle-optimization-report.json
  - frontend/lighthouse-report.json
- rationale: "Generated reports that can be regenerated, disabled files"

### Sentry Files Decision
- timestamp: "2025-01-27T10:35:00Z"
- approver: "Mendel"
- action: "HOLD"
- files:
  - frontend/sentry.client.config.ts.disabled
  - frontend/sentry.server.config.ts.disabled
  - frontend/sentry.edge.config.ts.disabled
- rationale: "Keep for future re-enablement after Docker module format conflicts are resolved"
- follow_up: "Mark for re-enablement task"

### Sentry Re-enablement Task
- timestamp: "2025-01-27T10:35:00Z"
- approver: "Mendel"
- action: "EDIT"
- target: "re-enable"
- files:
  - frontend/sentry.client.config.ts.disabled
  - frontend/sentry.server.config.ts.disabled
  - frontend/sentry.edge.config.ts.disabled
- task: "Re-enable Sentry after resolving Docker module format conflicts"
- priority: "Medium"
- dependencies: "Docker configuration updates, Next.js 15 compatibility testing"

## Main Phase 1 Decisions - 2025-01-27

### Approved Deletions - Development/Test Files
- timestamp: "2025-01-27T10:45:00Z"
- approver: "Mendel"
- action: "DELETE"
- files:
  - frontend/app/debug-routing/page.tsx
  - frontend/app/test-category-nav/page.tsx
  - frontend/app/test-distance-sorting/page.tsx
  - frontend/app/test-infinite-scroll/page.tsx
  - frontend/app/test-unified-card/page.tsx
  - frontend/app/test-unified-card-simple/page.tsx
  - frontend/app/debug-auth/page.tsx
  - frontend/app/test-redirect/page.tsx
  - frontend/app/test-auth/page.tsx
  - frontend/app/api/test/route.ts
- rationale: "Development and test pages that are not used in production"
- impact: "Removes 10 development files, cleans up test routes"

## Main Phase 2 Decisions - 2025-01-27

### Approved Deletions - Development/Testing Files
- timestamp: "2025-01-27T10:55:00Z"
- approver: "Mendel"
- action: "DELETE"
- files:
  - frontend/components/ui/TouchTestComponent.tsx
  - frontend/components/ui/__tests__/UnifiedCard.edge-cases.test.tsx
  - frontend/components/ui/__tests__/UnifiedCard.functional.test.tsx
  - frontend/components/ui/__tests__/UnifiedCard.accessibility.test.tsx
  - backend/debug_marketplace.py
  - backend/test_marketplace_images.py
  - backend/test_core_functionality.py
  - backend/test_migration.py
  - backend/test_feature_flag.py
  - backend/test_core_components.py
  - backend/test_new_architecture.py
  - backend/test_database_direct.py
  - backend/test_redis_test_endpoint.py
  - backend/mock_api.py
- rationale: "Development testing components and scripts that are not used in production"
- impact: "Removes 14 development/testing files, cleans up test components and scripts"

## Main Phase 3 Decisions - 2025-01-27

### Approved Deletions - Unused Deployment Configs
- timestamp: "2025-01-27T11:05:00Z"
- approver: "Mendel"
- action: "DELETE"
- files:
  - frontend/.netlifyignore
  - frontend/_redirects
  - frontend/_headers
  - frontend/netlify.env.example
- rationale: "Unused Netlify deployment configuration files (project uses Vercel/Render)"
- impact: "Removes 4 unused deployment configs, cleans up deployment confusion"

### Development Demo Components - Preserved
- timestamp: "2025-01-27T11:05:00Z"
- approver: "Mendel"
- action: "KEEP"
- files:
  - frontend/app/marketplace/enhanced-demo/page.tsx
  - frontend/components/ui/NotificationDemo.tsx
  - frontend/components/ui/PerformanceDashboard.tsx
- rationale: "Preserved for development purposes - valuable for development workflow"
- impact: "Maintains development tools and demo capabilities"

## Cleanup Round 2 Decisions - 2025-01-27

### Approved Deletions - Additional Test/Debug Files
- timestamp: "2025-01-27T11:15:00Z"
- approver: "Mendel"
- action: "DELETE"
- files:
  - frontend/app/api/auth/anonymous/test/route.ts
  - frontend/app/api/auth/anonymous/debug/route.ts
  - frontend/app/api/connectivity-test/route.ts
  - frontend/app/api/debug/route.ts
  - frontend/app/test-eatery-card/page.tsx
  - frontend/app/test-profile/page.tsx
  - frontend/app/test-restaurants/page.tsx
  - frontend/components/restaurant/__tests__/RestaurantCard.accessibility.test.tsx
  - frontend/components/test/DistanceSortingTest.tsx
  - frontend/components/test/InfiniteScrollTest.tsx
  - frontend/components/map/__tests__/useMarkerManagement.test.ts
  - frontend/components/map/__tests__/MapLegend.test.tsx
  - frontend/components/map/__tests__/MapControls.test.tsx
  - frontend/components/map/__tests__/MapNotification.test.tsx
  - frontend/__tests__/api-auth-routes.test.ts
  - frontend/__tests__/auth-utils.test.ts
  - frontend/__tests__/auth-acceptance-final.test.ts
  - frontend/__tests__/AppleSignInButton.test.tsx
- rationale: "Additional test and debug files found in second cleanup round - not used in production"
- impact: "Removes 18 additional test/debug files, further cleans up codebase"

## Script Review Phase Decisions - 2025-01-27

### Approved Deletions - Database Migration Scripts
- timestamp: "2025-01-27T11:25:00Z"
- approver: "Mendel"
- action: "DELETE"
- files:
  - backend/run_marketplace_migration.py
  - backend/deploy_marketplace_migration.py
  - backend/scripts/run_distance_migration.py
  - backend/scripts/run_cloud_migration.py
  - backend/scripts/run_profile_migration.py
  - backend/scripts/maintenance/run_reviews_migration.py
  - backend/scripts/migration/v3_to_v4_migration.py
  - backend/scripts/migration/api_v4_migration_manager.py
  - scripts/database/deploy_reviews_migration.py
  - scripts/database/simple_marketplace_migration.py
  - scripts/database/run_migration_with_env.py
  - scripts/database/run_complete_migration.py
  - scripts/database/execute_marketplace_migration.py
  - scripts/cleanup/remove_duplicate_migrations.py
- rationale: "Database migration scripts identified for consolidation - will be replaced with orchestrated migration system"
- impact: "Removes 14 migration scripts, prepares for consolidated migration approach"

## Cleanup Round 3 Decisions - 2025-01-27

### Approved Deletions - Example/Sample/Debug/Test Files
- timestamp: "2025-01-27T11:35:00Z"
- approver: "Mendel"
- action: "DELETE"
- files:
  - frontend/app/api/sentry-example-api/route.ts
  - frontend/scripts/test-prisma-config.js
  - frontend/scripts/test-redirect-flow.js
  - frontend/scripts/test-api-endpoints.js
  - frontend/scripts/debug-location-storage.js
  - frontend/scripts/debug-redirect-issue.js
  - frontend/scripts/test-production-redirects.js
  - frontend/scripts/test-map-performance.js
  - frontend/scripts/test-profile-system.js
  - frontend/scripts/test-filter-performance.js
  - frontend/scripts/test-font-loading.js
  - frontend/scripts/test-signin-flow.js
  - frontend/scripts/test-email-service.js
  - frontend/scripts/test-email.js
  - frontend/test-supabase.js
  - frontend/test-redis.js
  - backend/database/migrations/add_sample_marketplace_data.py
  - backend/tests/test_hours_normalizer.py
  - backend/tests/test_database_connection_manager.py
  - backend/tests/test_distance_filtering.py
  - backend/tests/test_dependencies.py
  - backend/tests/test_google_places_validator.py
  - backend/tests/test_redis_integration.py
  - backend/tests/test_services_v4.py
  - backend/tests/test_api_v4.py
  - backend/tests/test_feature_flags.py
  - backend/tests/__init__.py
  - backend/tests/test_render_redis.py
  - backend/tests/utils/testUtils.py
  - backend/tests/test_marketplace_comprehensive.py
  - backend/tests/test_health_full.py
  - backend/tests/test_hours.py
  - backend/tests/test_api_response_unification.py
  - backend/tests/test_data_validator.py
  - backend/tests/test_jwt_jti_extraction.py
  - backend/tests/test_hours_endpoint.py
  - backend/tests/test_error_handler_decorators.py
  - backend/tests/test_hours_compute.py
  - backend/tests/test_hours_parser.py
  - backend/tests/test_unified_search_service.py
  - backend/tests/performance/test_v4_performance.py
  - backend/tests/test_db_resilience.py
  - backend/tests/test_service_manager.py
  - backend/tests/test_error_handler.py
  - backend/tests/test_database_v4.py
  - backend/tests/test_marketplace.py
  - backend/tests/test_logging_config.py
  - backend/tests/test_config_manager.py
  - backend/scripts/test_hours_formatter.py
  - backend/scripts/test_redis_implementation.py
  - backend/scripts/maintenance/test_json_parsing.py
  - backend/scripts/maintenance/test_json_fix.py
  - backend/scripts/maintenance/test_flask_app.py
  - backend/scripts/maintenance/test_services.py
  - backend/scripts/maintenance/check_sample_hours.py
  - backend/scripts/maintenance/test_api.py
  - backend/scripts/maintenance/debug_db.py
  - backend/scripts/maintenance/test_single_update.py
  - backend/scripts/test_search_system.py
  - backend/routes/debug_routes.py
  - backend/create_sample_data.py
  - scripts/test-cleanup.js
  - scripts/test-google-oauth.js
  - scripts/test-all-auth-methods.js
  - scripts/test-ci-fixes.js
  - scripts/test-google-oauth-flow.js
  - scripts/testing/test_geolocation_fix.py
  - scripts/cleanup/remove_duplicate_tests.py
- rationale: "Example, sample, debug, and test files that are not used in production - can be regenerated if needed"
- impact: "Removes 68 additional files, significantly reduces codebase complexity and maintenance overhead"

### Development Utilities - Preserved
- timestamp: "2025-01-27T11:35:00Z"
- approver: "Mendel"
- action: "KEEP"
- files:
  - frontend/app/marketplace/enhanced-demo/page.tsx
  - frontend/test-server-init.js
  - ci-scripts/temp_deprecated_check.js
  - ci-scripts/pr_template_validation.js
  - frontend/sandbox/src/test/setup.ts
- rationale: "Preserved useful development utilities and CI/CD tools"
- impact: "Maintains essential development workflow tools"

## Cleanup Round 4 Decisions - 2025-01-27

### Approved Deletions - System Files & Old Documentation
- timestamp: "2025-01-27T11:45:00Z"
- approver: "Mendel"
- action: "DELETE"
- files:
  - 27 .DS_Store files (macOS system files)
  - 2 temporary directories (.temp)
  - 2 generated directories (coverage, dist)
  - 10 old deployment reports
  - 5 old implementation reports
  - 1 complete archive directory
- rationale: "System files, temporary files, generated directories, and outdated documentation that add no value to current codebase"
- impact: "Removes 50+ additional files, cleans up system files and outdated documentation"

## Cleanup Round 5 Decisions - 2025-01-27

### Approved Deletions - Final Test Files
- timestamp: "2025-01-27T11:55:00Z"
- approver: "Mendel"
- action: "DELETE"
- files:
  - ./frontend/__tests__/unit/useFeatureFlags.test.tsx
  - ./frontend/__tests__/auth/registration.test.ts
  - ./frontend/__tests__/auth/SignUpPage.test.tsx
  - ./frontend/__tests__/middleware.test.ts
  - ./frontend/__tests__/apple-oauth-feature-flags.test.ts
  - ./frontend/__tests__/components/AvatarUpload.test.tsx
  - ./frontend/__tests__/components/CategoryNav.simple.test.tsx
  - ./frontend/__tests__/components/CategoryNav.test.tsx
  - ./frontend/__tests__/apple-strings.test.ts
  - ./frontend/__tests__/middleware-utils.test.ts
  - ./frontend/__tests__/hooks/useCaptcha.test.ts
  - ./frontend/lib/utils/__tests__/favorites.test.ts
  - ./backend/tests/conftest.py
  - ./backend/tests/performance/simple_performance_test.py
  - ./backend/scripts/maintenance/simple_test.py
- rationale: "Final test files that can be regenerated - not used in production"
- impact: "Removes 15 additional test files, completes comprehensive cleanup"

### Useful Scripts - Preserved
- timestamp: "2025-01-27T11:55:00Z"
- approver: "Mendel"
- action: "KEEP"
- files:
  - ./frontend/scripts/cleanup-unused-vars.js
  - ./frontend/scripts/simple-profile-test.js
  - ./backend/database/migrations/cleanup_unused_columns.py
  - ./scripts/maintenance/test_data_insert.py
  - ./scripts/maintenance/test_enhancement.py
- rationale: "Preserved useful utility scripts for development workflow"
- impact: "Maintains essential development tools"

## Cleanup Round 6 Decisions - 2025-01-27

### Approved Deletions - Final Remaining Test/Debug/Example Files
- timestamp: "2025-01-27T12:05:00Z"
- approver: "Mendel"
- action: "DELETE"
- files:
  - ./frontend/app/test-unified-card/README.md
  - ./frontend/tsconfig.test.json
  - ./frontend/scripts/test-docker.sh
  - ./frontend/scripts/test-unified-card.sh
  - ./backend/.pytest_cache/README.md
  - ./scripts/test-docker-frontend.sh
  - ./scripts/test-docker-vercel-build.sh
  - ./scripts/test-docker-all.sh
  - ./scripts/docker-push-example.sh
  - ./scripts/test-ngrok-deployment.sh
  - ./scripts/cleanup/archive-old-map-components.sh
  - ./scripts/deployment/test-and-commit.sh
  - ./scripts/production-test.sh
  - ./scripts/maintenance/test_data_insert.py
  - ./scripts/maintenance/test_enhancement.py
  - ./scripts/test-guest-signin.sh
  - ./scripts/test-docker-build.sh
  - ./docs/testing/production-test-results.md
  - ./docs/testing/authentication-system-guide.md
  - ./docs/setup/google-oauth-debugging.md
  - ./docs/testing/TEST_COVERAGE_STRATEGY.md
  - ./docs/testing/STAGING_TESTING_GUIDE.md
  - ./docs/testing/production-testing-checklist.md
  - ./supabase/migrations/20250101000004_disable_trigger_temporarily.sql
  - ./ci-scripts/temp_file_check.sh
  - ./ci-scripts/example-metrics.json
  - ./ci-scripts/temp_deprecated_check.js
- rationale: "Final remaining test, debug, example, and temporary files - not used in production"
- impact: "Removes 28 additional files, completes final cleanup round"

### Final Development Utilities - Preserved
- timestamp: "2025-01-27T12:05:00Z"
- approver: "Mendel"
- action: "KEEP"
- files:
  - ./frontend/app/marketplace/enhanced-demo/page.tsx
  - ./frontend/test-server-init.js
  - ./frontend/sandbox/src/test/setup.ts
  - ./frontend/scripts/simple-profile-test.js
  - ./ci-scripts/pr_template_validation.js
- rationale: "Preserved final useful development utilities and CI/CD tools"
- impact: "Maintains essential development workflow tools"
