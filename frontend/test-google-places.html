<!DOCTYPE html>
<html>
<head>
    <title>Google Places API Test</title>
    <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCl7ryK-cp9EtGoYMJ960P1jZO-nnTCCqM&libraries=places"></script>
</head>
<body>
    <h1>Google Places API Test</h1>
    <input type="text" id="address" placeholder="Enter address..." style="width: 300px; padding: 10px;">
    <div id="results"></div>

    <script>
        function initAutocomplete() {
            const input = document.getElementById('address');
            const resultsDiv = document.getElementById('results');
            
            console.log('Initializing autocomplete...');
            console.log('Google Maps loaded:', !!window.google);
            console.log('Google Places loaded:', !!window.google?.maps?.places);
            
            if (!window.google || !window.google.maps || !window.google.maps.places) {
                resultsDiv.innerHTML = '<p style="color: red;">Google Maps Places API not loaded!</p>';
                return;
            }

            const autocomplete = new google.maps.places.Autocomplete(input, {
                types: ['address'],
                componentRestrictions: { country: 'us' }
            });

            autocomplete.addListener('place_changed', function() {
                const place = autocomplete.getPlace();
                console.log('Place selected:', place);
                
                if (place.geometry) {
                    resultsDiv.innerHTML = `
                        <h3>Selected Place:</h3>
                        <p><strong>Name:</strong> ${place.name || 'N/A'}</p>
                        <p><strong>Address:</strong> ${place.formatted_address || 'N/A'}</p>
                        <p><strong>Place ID:</strong> ${place.place_id || 'N/A'}</p>
                        <p><strong>Lat:</strong> ${place.geometry.location.lat()}</p>
                        <p><strong>Lng:</strong> ${place.geometry.location.lng()}</p>
                    `;
                } else {
                    resultsDiv.innerHTML = '<p style="color: orange;">No geometry data available</p>';
                }
            });

            // Test predictions
            const service = new google.maps.places.AutocompleteService();
            service.getPlacePredictions({
                input: 'Miami',
                types: ['address'],
                componentRestrictions: { country: 'us' }
            }, function(predictions, status) {
                console.log('Predictions test:', { predictions, status });
                if (status === google.maps.places.PlacesServiceStatus.OK && predictions) {
                    resultsDiv.innerHTML += '<h3>Test Predictions:</h3><ul>' + 
                        predictions.slice(0, 3).map(p => `<li>${p.description}</li>`).join('') + 
                        '</ul>';
                } else {
                    resultsDiv.innerHTML += '<p style="color: red;">Predictions test failed: ' + status + '</p>';
                }
            });
        }

        // Initialize when page loads
        window.onload = initAutocomplete;
    </script>
</body>
</html>
