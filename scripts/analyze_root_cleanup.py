#!/usr/bin/env python3
"""
Root Directory Cleanup Analysis
==============================

This script analyzes files in the root directory and determines
which ones should be moved, refactored, or deleted for better organization.
"""

import os
import shutil
from pathlib import Path

def analyze_root_files():
    """Analyze files in the root directory and categorize them."""
    
    # Files that should be moved to docs/
    files_to_move_to_docs = [
        "ENVIRONMENT.md",
        "ORACLE_CLOUD_SECURITY_SETUP.md", 
        "QUICK_ORACLE_SETUP_GUIDE.md",
        "ORACLE_CLOUD_SETUP_CHECKLIST.md",
        "QUICK_DATABASE_FIX.md",
        "issue_finding.md",
        "GEMINI.md",
        "AGENTS.md",
        "system_index.md"
    ]
    
    # Files that should be moved to deployment/
    files_to_move_to_deployment = [
        "render.yaml",
        "vercel.json"
    ]
    
    # Files that should be moved to config/
    files_to_move_to_config = [
        "system_inventory.json"
    ]
    
    # Files that should be deleted (temporary/obsolete)
    files_to_delete = [
        ".DS_Store"
    ]
    
    # Files that should stay in root (essential)
    files_to_keep = [
        "README.md",
        ".gitignore",
        "package.json",
        "requirements.txt"
    ]
    
    # Directories that should be cleaned up
    dirs_to_analyze = [
        ".venv",
        "node_modules", 
        ".cursor",
        ".gemini",
        ".vercel",
        ".husky",
        ".vscode",
        "clean",
        "projects"
    ]
    
    print("üîç Root Directory Cleanup Analysis")
    print("=" * 60)
    
    # Check files to move to docs/
    print("\nüìÅ Files to move to docs/")
    print("-" * 30)
    for file in files_to_move_to_docs:
        if os.path.exists(file):
            print(f"‚úÖ {file}")
        else:
            print(f"‚ùå {file} (not found)")
    
    # Check files to move to deployment/
    print("\nüöÄ Files to move to deployment/")
    print("-" * 30)
    for file in files_to_move_to_deployment:
        if os.path.exists(file):
            print(f"‚úÖ {file}")
        else:
            print(f"‚ùå {file} (not found)")
    
    # Check files to move to config/
    print("\n‚öôÔ∏è  Files to move to config/")
    print("-" * 30)
    for file in files_to_move_to_config:
        if os.path.exists(file):
            print(f"‚úÖ {file}")
        else:
            print(f"‚ùå {file} (not found)")
    
    # Check files to delete
    print("\nüóëÔ∏è  Files to delete")
    print("-" * 30)
    for file in files_to_delete:
        if os.path.exists(file):
            print(f"‚úÖ {file}")
        else:
            print(f"‚ùå {file} (not found)")
    
    # Check files to keep
    print("\nüìã Files to keep in root")
    print("-" * 30)
    for file in files_to_keep:
        if os.path.exists(file):
            print(f"‚úÖ {file}")
        else:
            print(f"‚ùå {file} (not found)")
    
    # Analyze directories
    print("\nüìÇ Directories to analyze")
    print("-" * 30)
    for dir_name in dirs_to_analyze:
        if os.path.exists(dir_name):
            print(f"‚úÖ {dir_name}/")
        else:
            print(f"‚ùå {dir_name}/ (not found)")
    
    return {
        'docs': files_to_move_to_docs,
        'deployment': files_to_move_to_deployment,
        'config': files_to_move_to_config,
        'delete': files_to_delete,
        'keep': files_to_keep,
        'dirs': dirs_to_analyze
    }

def cleanup_root_directory():
    """Perform the actual cleanup of the root directory."""
    
    print("\nüßπ Starting Root Directory Cleanup")
    print("=" * 60)
    
    # Create necessary directories
    os.makedirs("docs/setup", exist_ok=True)
    os.makedirs("docs/deployment", exist_ok=True)
    os.makedirs("config", exist_ok=True)
    
    # Move files to docs/setup/
    setup_files = [
        "ENVIRONMENT.md",
        "ORACLE_CLOUD_SECURITY_SETUP.md",
        "QUICK_ORACLE_SETUP_GUIDE.md", 
        "ORACLE_CLOUD_SETUP_CHECKLIST.md",
        "QUICK_DATABASE_FIX.md",
        "issue_finding.md"
    ]
    
    moved_count = 0
    for file in setup_files:
        if os.path.exists(file):
            try:
                shutil.move(file, f"docs/setup/{file}")
                print(f"üìÅ Moved: {file} ‚Üí docs/setup/{file}")
                moved_count += 1
            except Exception as e:
                print(f"‚ùå Failed to move {file}: {e}")
    
    # Move files to docs/deployment/
    deployment_files = [
        "GEMINI.md",
        "AGENTS.md",
        "system_index.md"
    ]
    
    for file in deployment_files:
        if os.path.exists(file):
            try:
                shutil.move(file, f"docs/deployment/{file}")
                print(f"üìÅ Moved: {file} ‚Üí docs/deployment/{file}")
                moved_count += 1
            except Exception as e:
                print(f"‚ùå Failed to move {file}: {e}")
    
    # Move files to deployment/
    deployment_config_files = [
        "render.yaml",
        "vercel.json"
    ]
    
    for file in deployment_config_files:
        if os.path.exists(file):
            try:
                shutil.move(file, f"deployment/{file}")
                print(f"üìÅ Moved: {file} ‚Üí deployment/{file}")
                moved_count += 1
            except Exception as e:
                print(f"‚ùå Failed to move {file}: {e}")
    
    # Move files to config/
    config_files = [
        "system_inventory.json"
    ]
    
    for file in config_files:
        if os.path.exists(file):
            try:
                shutil.move(file, f"config/{file}")
                print(f"üìÅ Moved: {file} ‚Üí config/{file}")
                moved_count += 1
            except Exception as e:
                print(f"‚ùå Failed to move {file}: {e}")
    
    # Delete temporary files
    deleted_count = 0
    temp_files = [".DS_Store"]
    
    for file in temp_files:
        if os.path.exists(file):
            try:
                os.remove(file)
                print(f"üóëÔ∏è  Deleted: {file}")
                deleted_count += 1
            except Exception as e:
                print(f"‚ùå Failed to delete {file}: {e}")
    
    # Clean up unnecessary directories
    dirs_to_remove = [".venv", "clean", "projects"]
    
    for dir_name in dirs_to_remove:
        if os.path.exists(dir_name):
            try:
                shutil.rmtree(dir_name)
                print(f"üóëÔ∏è  Removed directory: {dir_name}/")
                deleted_count += 1
            except Exception as e:
                print(f"‚ùå Failed to remove {dir_name}/: {e}")
    
    print(f"\nüìä Cleanup Summary:")
    print(f"   üìÅ Moved: {moved_count} files")
    print(f"   üóëÔ∏è  Deleted: {deleted_count} files/directories")
    
    return moved_count, deleted_count

def create_cleanup_summary():
    """Create a summary of the root directory cleanup."""
    
    summary_content = """# Root Directory Cleanup Summary

## üßπ Cleanup Completed

This document summarizes the cleanup performed on the root directory to improve project organization.

## üìÅ Files Moved

### To docs/setup/
- `ENVIRONMENT.md` - Environment setup documentation
- `ORACLE_CLOUD_SECURITY_SETUP.md` - Oracle Cloud security setup
- `QUICK_ORACLE_SETUP_GUIDE.md` - Quick Oracle Cloud setup guide
- `ORACLE_CLOUD_SETUP_CHECKLIST.md` - Oracle Cloud setup checklist
- `QUICK_DATABASE_FIX.md` - Quick database fix documentation
- `issue_finding.md` - Issue finding documentation

### To docs/deployment/
- `GEMINI.md` - Gemini AI integration documentation
- `AGENTS.md` - AI agents documentation
- `system_index.md` - System index documentation

### To deployment/
- `render.yaml` - Render deployment configuration
- `vercel.json` - Vercel deployment configuration

### To config/
- `system_inventory.json` - System inventory configuration

## üóëÔ∏è Files Deleted

### Temporary Files
- `.DS_Store` - macOS system file

### Directories Removed
- `.venv/` - Virtual environment (should be recreated locally)
- `clean/` - Temporary cleanup directory
- `projects/` - Temporary projects directory

## üìã Files Kept in Root

### Essential Files
- `README.md` - Project overview
- `.gitignore` - Git ignore rules
- `package.json` - Node.js dependencies
- `requirements.txt` - Python dependencies

## üìÇ Directories Kept in Root

### Essential Directories
- `backend/` - Python Flask backend
- `frontend/` - Next.js React frontend
- `docs/` - Project documentation
- `scripts/` - Utility scripts
- `config/` - Configuration files
- `data/` - Data files
- `deployment/` - Deployment configurations
- `monitoring/` - Monitoring and health checks
- `supabase/` - Supabase configuration
- `tools/` - Development tools
- `ci-scripts/` - CI/CD scripts

### Development Directories (Keep)
- `.git/` - Git repository
- `.github/` - GitHub workflows
- `.cursor/` - Cursor IDE configuration
- `.gemini/` - Gemini AI configuration
- `.vercel/` - Vercel configuration
- `.husky/` - Git hooks
- `.vscode/` - VS Code configuration
- `node_modules/` - Node.js dependencies

## üéØ Benefits of Cleanup

1. **Better Organization**: Related files grouped together
2. **Cleaner Root**: Only essential files in root directory
3. **Easier Navigation**: Logical file structure
4. **Improved Documentation**: Setup guides in docs/setup/
5. **Deployment Clarity**: Deployment configs in deployment/
6. **Configuration Management**: Config files in config/

## üìÅ New Directory Structure

```
jewgo-app/
‚îú‚îÄ‚îÄ README.md              # Project overview
‚îú‚îÄ‚îÄ .gitignore            # Git ignore rules
‚îú‚îÄ‚îÄ package.json          # Node.js dependencies
‚îú‚îÄ‚îÄ requirements.txt      # Python dependencies
‚îÇ
‚îú‚îÄ‚îÄ backend/              # Python Flask backend
‚îú‚îÄ‚îÄ frontend/             # Next.js React frontend
‚îú‚îÄ‚îÄ docs/                 # Project documentation
‚îÇ   ‚îú‚îÄ‚îÄ setup/            # Setup guides
‚îÇ   ‚îú‚îÄ‚îÄ deployment/       # Deployment documentation
‚îÇ   ‚îî‚îÄ‚îÄ ...
‚îú‚îÄ‚îÄ scripts/              # Utility scripts
‚îú‚îÄ‚îÄ config/               # Configuration files
‚îú‚îÄ‚îÄ data/                 # Data files
‚îú‚îÄ‚îÄ deployment/           # Deployment configurations
‚îú‚îÄ‚îÄ monitoring/           # Monitoring and health checks
‚îú‚îÄ‚îÄ supabase/            # Supabase configuration
‚îú‚îÄ‚îÄ tools/               # Development tools
‚îú‚îÄ‚îÄ ci-scripts/          # CI/CD scripts
‚îÇ
‚îú‚îÄ‚îÄ .git/                # Git repository
‚îú‚îÄ‚îÄ .github/             # GitHub workflows
‚îú‚îÄ‚îÄ .cursor/             # Cursor IDE configuration
‚îú‚îÄ‚îÄ .gemini/             # Gemini AI configuration
‚îú‚îÄ‚îÄ .vercel/             # Vercel configuration
‚îú‚îÄ‚îÄ .husky/              # Git hooks
‚îú‚îÄ‚îÄ .vscode/             # VS Code configuration
‚îî‚îÄ‚îÄ node_modules/        # Node.js dependencies
```

## üöÄ Next Steps

1. ‚úÖ Root directory cleaned and organized
2. ‚úÖ Documentation properly categorized
3. ‚úÖ Deployment configurations organized
4. ‚úÖ Configuration files centralized
5. ‚úÖ Temporary files removed

The project now has a clean, organized root directory structure that makes it easier to navigate and maintain.
"""
    
    with open("docs/CLEANUP_ROOT_SUMMARY.md", "w") as f:
        f.write(summary_content)
    
    print(f"üìù Created: docs/CLEANUP_ROOT_SUMMARY.md")

def main():
    """Main cleanup function."""
    print("üöÄ Starting Root Directory Analysis and Cleanup")
    print("=" * 70)
    
    # Analyze current state
    analysis = analyze_root_files()
    
    # Perform cleanup
    moved_count, deleted_count = cleanup_root_directory()
    
    # Create cleanup summary
    create_cleanup_summary()
    
    print("\n" + "=" * 70)
    print("üéâ Root Directory Cleanup Complete!")
    print("=" * 70)
    print(f"üìä Summary:")
    print(f"   üìÅ Moved: {moved_count} files to appropriate directories")
    print(f"   üóëÔ∏è  Deleted: {deleted_count} temporary files/directories")
    print(f"   üìù Created: docs/CLEANUP_ROOT_SUMMARY.md")
    print()
    print("üéØ Your root directory is now clean and organized!")
    print("üìÇ Files are properly categorized in their respective directories")
    print("üöÄ Ready for continued development with clean project structure")

if __name__ == "__main__":
    main()
